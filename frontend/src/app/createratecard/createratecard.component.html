<div class="container mt-4">
  <h2>Contractor Information</h2>

  <form [formGroup]="rateCardForm" (ngSubmit)="onSubmit()">
    <div class="row mb-3">
      <!-- Contractor Name -->
      <div class="col-md-6">
        <label for="contractorName" class="form-label fw-bold"
          >Contractor Name:</label
        >
        <input
          type="text"
          id="contractorName"
          formControlName="contractorName"
          class="form-control"
          placeholder="Enter contractor name"
          required
        />
        <div
          *ngIf="
            contractorName?.invalid &&
            (contractorName?.touched || contractorName?.dirty)
          "
          class="text-danger"
        >
          Contractor name is required and must be at least 3 characters long.
        </div>
      </div>

      <!-- Mobile Number -->
      <div class="col-md-6">
        <label for="mobile" class="form-label fw-bold">Mobile Number:</label>
        <input
          type="text"
          id="mobile"
          minlength="10"
          maxlength="10"
          formControlName="mobile"
          class="form-control"
          placeholder="Enter mobile number"
          required
        />
        <div
          *ngIf="mobile?.invalid && (mobile?.touched || mobile?.dirty)"
          class="text-danger"
        >
          Mobile number is required and must be a valid 10-digit number.
        </div>
      </div>
    </div>

    <div class="row mb-3">
      <!-- Email -->
      <div class="col-md-6">
        <label for="email" class="form-label fw-bold">Email:</label>
        <input
          type="email"
          id="email"
          formControlName="email"
          class="form-control"
          placeholder="Enter email"
          required
        />
        <div
          *ngIf="email?.invalid && (email?.touched || email?.dirty)"
          class="text-danger"
        >
          Please enter a valid email.
        </div>
      </div>

      <!-- Work Field (Dropdown) -->
      <div class="col-md-6">
        <label for="work" class="form-label fw-bold">Work Field:</label>
        <select id="work" formControlName="work" class="form-select" required>
          <option value="" disabled>Select work</option>
          <option *ngFor="let work of works" [value]="work.id">
            {{ work.workfieldName }}
          </option>
        </select>
        <div
          *ngIf="work?.invalid && (work?.touched || work?.dirty)"
          class="text-danger"
        >
          Work is required.
        </div>
      </div>
      <!-- Address -->
      <label for="address" class="form-label fw-bold">Address:</label>
      <input
        type="text"
        id="address"
        formControlName="address"
        class="form-control"
        placeholder="Enter address"
        rows="3"
        required
      />
      <div
        *ngIf="address?.invalid && (address?.touched || address?.dirty)"
        class="text-danger"
      >
        Address is required.
      </div>
    </div>
  </form>
</div>
<div class="mt-2 p-2 mx-2 border-top">
  <h2 class="row mt-2 mx-2">Create Product Rate Card</h2>
  <form [formGroup]="productRateCardForm" (ngSubmit)="onSubmit()">
    <div formArrayName="products" class="">
      <div
        *ngFor="let product of productForms.controls; let i = index"
        [formGroupName]="i"
        class="p-1 mb-2 px-sm-2 mt-2"
      >
        <div class="row mb-3 align-items-end">
          <!-- Product Name -->
          <div class="col-md-4">
            <label for="productName" class="form-label fw-bold"
              >Product Name</label
            >
            <input
              type="text"
              id="productName"
              formControlName="productName"
              class="form-control"
              placeholder="Enter product name"
              required
            />
          </div>

          <!-- Rate -->
          <div class="col-md-3">
            <label for="rate" class="form-label fw-bold">Product Rate</label>
            <input
              type="number"
              id="rate"
              formControlName="rate"
              class="form-control"
              placeholder="Rate/sq.ft"
              required
            />
          </div>

          <!-- Work Area -->
          <!-- <div class="col-md-3">
            <label for="workArea" class="form-label fw-bold">Work Area</label>
            <input
              type="text"
              id="workArea"
              formControlName="workArea"
              class="form-control"
              placeholder="Product work area"
              readonly
              required
            />
          </div> -->

          <!-- Remove Product Button -->
          <div class="col-sm-1">
            <button
              type="button"
              class="btn btn-danger"
              (click)="removeProduct(i)"
            >
              <i class="bi bi-trash3"></i> Remove
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Add More Button -->

    <button type="button" class="btn btn-primary mb-3" (click)="addmore()">
      <i class="bi bi-plus-circle mx-1"></i> Add More
    </button>
  </form>
</div>
<hr />
<!-- <input [(ngModel)]="newWorkField" placeholder="Enter new work field" />
<button style="background-color: red" (click)="addNewWorkField()">
  Add New Work Field
</button>
<hr /> -->

<!-- Submit Button -->
<button type="submit" class="btn btn-success" (click)="onSubmit()">
  <i class="bi bi-floppy mx-1"></i>
  Save
</button>
